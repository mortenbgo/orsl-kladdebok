name: "ğŸš€ Deployment Dashboard"

on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Environment to deploy to'
        required: true
        type: choice
        options:
          - dev
          - qa
          - prod
      commit_sha:
        description: 'Commit SHA to deploy (leave empty for latest)'
        required: false
        type: string

jobs:
  deployment-info:
    name: "ğŸ“‹ Deployment Information"
    runs-on: ubuntu-latest
    steps:
      - name: Show deployment status
        run: |
          COMMIT_SHA="${{ inputs.commit_sha || github.sha }}"
          echo "## ğŸš€ Deployment Dashboard"
          echo "**Target Environment:** ${{ inputs.environment }}"
          echo "**Commit SHA:** $COMMIT_SHA"
          echo "**Triggered by:** ${{ github.actor }}"
          echo ""
          echo "### Deployment Order Status for commit: $COMMIT_SHA"
          
          # Check deployment status for this commit
          echo "ğŸ” Checking deployment history..."
          
          # This will trigger the actual deployment
          echo "Proceeding with deployment to ${{ inputs.environment }}..."

  trigger-deployment:
    name: "ğŸ¯ Deploy to ${{ inputs.environment }}"
    needs: [deployment-info]
    uses: ./.github/workflows/deploy-to-env.yaml
    with:
      environment: ${{ inputs.environment }}
    secrets: inherit